<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<div id="app">
			<current-user v-bind:user="user">
			  {{ user.firstName }}
			</current-user>
			
			<hr>
			<current-user v-bind:user="user">
			  <template v-slot:default="slotProps">
			    {{ slotProps.user.firstName }}
			  </template>
			</current-user>
			<hr>
			
			<!-- 在上述情况下，当被提供的内容只有默认插槽时，组件的标签才可以被当作插槽的模板来使用。这样我们就可以把 v-slot 直接用在组件上： -->
			<current-user v-bind:user="user" v-slot:default="slotProps">
			  {{ slotProps.user.firstName }}
			</current-user>
			<hr>
			<!-- 注意默认插槽的缩写语法不能和具名插槽混用，因为它会导致作用域不明确： -->
			<!-- 
			无效，会导致警告
				<current-user v-slot="slotProps">
				  {{ slotProps.user.firstName }}
				  <template v-slot:other="otherSlotProps">
				    slotProps is NOT available here
				  </template>
				</current-user>
			 -->
			 
			<!-- 只要出现多个插槽，请始终为所有的插槽使用完整的基于 <template> 的语法： -->
			<current-user v-bind:user="user">
				<template v-slot:default="slotProps">
				 {{ slotProps.user.firstName }}
				</template>

				<template v-slot:other="otherSlotProps">
				 ...
				</template>
			</current-user>
			<p>============================================================================================</p>
			 <h2>解构插槽</h2>
			 <!-- 作用域插槽的内部工作原理是将你的插槽内容包裹在一个拥有单个参数的函数里： 
				function (slotProps) {
					// 插槽内容
				}
			-->
			<!-- 这意味着 v-slot 的值实际上可以是任何能够作为函数定义中的参数的 JavaScript 表达式。所以在支持的环境下 (单文件组件或现代浏览器)，你也可以使用 ES2015 解构来传入具体的插槽 prop，如下： -->
			<current-user v-bind:user="user" v-slot="{ user }">
			  {{ user.firstName }}
			</current-user>
			<hr>
			
			<!-- 这样可以使模板更简洁，尤其是在该插槽提供了多个 prop 的时候。它同样开启了 prop 重命名等其它可能，例如将 user 重命名为 person： -->
			<current-user v-bind:user="user" v-slot="{ user: person }">
			  {{ person.firstName }}
			</current-user>
			<hr>
			
			<!-- 你甚至可以定义后备内容，用于插槽 prop 是 undefined 的情形： -->
			<current-user v-slot="{ user = { firstName: 'Guest' } }">
			  {{ user.firstName }}
			</current-user>
		</div>
		<!-- ===========================================内容脚本分界线=========================================== -->
		<script src="../statics/vue-2.7.14.js"></script>
		<script type="text/javascript">
			Vue.component('current-user',{
				props:['user'],
				template:
				`
				<span>
				  <slot v-bind:user="user">{{ user.lastName }}</slot>
				  <slot name="other"></slot>
				</span>
				`
				/* 
				<current-user> 组件可以访问到 user，而我们提供的内容是在父级渲染的。所以这段代码不会生效
				<slot>{{ user.lastName }}</slot>
				 */
				/* 
					绑定在 <slot> 元素上的 attribute 被称为插槽 prop。现在在父级作用域中，我们可以使用带值的 v-slot 来定义我们提供的插槽 prop 的名字：
				 */
			})
			
			new Vue({
				el:'#app',
				data:{
					user:{
						firstName:'寒',
						lastName:'江雪'
					}
				}
			})
		</script>
	</body>
</html>